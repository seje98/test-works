"use strict";document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll(".js-map-marker"),a=document.querySelectorAll(".js-pagination-slide");var o=document.querySelectorAll(".js-swiper-img");let t=document.querySelector(".js-popup-photo");var r=document.querySelector(".js-popup-photo-close");let s=document.querySelector(".js-popup-photo-img"),c=document.querySelector(".js-wrapper");var n=document.querySelector(".js-form");let i=document.querySelector(".js-input-name"),l=document.querySelector(".js-input-phone"),m=document.querySelector(".js-input-email"),p=document.querySelector(".js-label-name"),d=document.querySelector(".js-label-phone"),u=document.querySelector(".js-label-email"),w=document.querySelector(".js-form-btn"),v=document.querySelectorAll(".js-input"),g=document.querySelector(".js-checkbox"),h=document.querySelector(".js-anchor");var k=document.querySelector(".js-btn-to-form");let b=document.querySelector(".js-menu");var _=document.querySelector(".js-show-menu"),L=document.querySelectorAll(".js-menu-block"),f=document.querySelector(".js-menu-close");let y=[{classIcon:"page-map-wrap-marker__icon--shop",label:"Магазины",coordinates:[44.989938,38.925527]},{classIcon:"page-map-wrap-marker__icon--pin",label:"ЖК “Яблоновский”",coordinates:[44.991043,38.927432]},{classIcon:"page-map-wrap-marker__icon--toys",label:"Детский сад",coordinates:[44.989116,38.930695]},{classIcon:"page-map-wrap-marker__icon--gas",label:"АЗС",coordinates:[44.989118,38.925379]},{classIcon:"page-map-wrap-marker__icon--hospital",label:"Поликлинника",coordinates:[44.986356,38.927092]}],j=[{classContainer:"page-map-wrap-marker--swimming",classIcon:"page-map-wrap-marker__icon--swimming",coordinates:[44.995012,38.926473]},{classContainer:"page-map-wrap-marker--bank",classIcon:"page-map-wrap-marker__icon--bank",coordinates:[44.993012,38.931006]},{classContainer:"page-map-wrap-marker--shop-white",classIcon:"page-map-wrap-marker__icon--shop-white",coordinates:[44.991636,38.931494]},{classContainer:"page-map-wrap-marker--bank-white",classIcon:"page-map-wrap-marker__icon--bank-white",coordinates:[44.990106,38.932958]},{classContainer:"page-map-wrap-marker--coffee",classIcon:"page-map-wrap-marker__icon--coffee",coordinates:[44.9887,38.93282]}],S=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,E=document.documentElement.clientWidth,q,T,I,M=new Swiper(".js-swiper",{spaceBetween:30,navigation:{nextEl:".page-description-swiper-button-next",prevEl:".page-description-swiper-button-prev"},on:{slideChange:()=>{var e=document.querySelector(`.js-pagination-slide[data-id="${M.activeIndex}"]`);a.forEach(e=>e.classList.remove("page-description-pagination-item-block--active")),e.classList.add("page-description-pagination-item-block--active")}}});new Swiper(".js-advantages-swiper",{slidesPerView:4,spaceBetween:36,allowTouchMove:!1,breakpoints:{1050:{slidesPerView:3.5,allowTouchMove:!0},930:{slidesPerView:3.1,allowTouchMove:!0},820:{slidesPerView:2.5,allowTouchMove:!0},660:{slidesPerView:1.7,allowTouchMove:!0},450:{slidesPerView:1.5,allowTouchMove:!0},385:{slidesPerView:1.2,allowTouchMove:!0}}}),new Swiper(".js-page-complex-container-swiper",{slidesPerView:4,allowTouchMove:!1,pagination:{el:".swiper-pagination"},breakpoints:{1240:{slidesPerView:3,spaceBetween:30,allowTouchMove:!0},920:{slidesPerView:2,spaceBetween:30,allowTouchMove:!0},620:{slidesPerView:1,spaceBetween:30,allowTouchMove:!0}}});if(_.addEventListener("click",()=>b.classList.add("header-menu--show")),f.addEventListener("click",()=>b.classList.remove("header-menu--show")),window.addEventListener("resize",()=>{800<(E=document.documentElement.clientWidth)&&b.classList.contains("header-menu--show")&&b.classList.remove("header-menu--show")}),L.forEach(a=>a.addEventListener("click",()=>{var e=document.querySelector(`.js-menu-block-list[data-id='${a.dataset.id}']`);a.classList.toggle("header-menu-container-block__title--active"),e.classList.toggle("hide")})),l){var C=document.getElementsByClassName("js-input-phone");for(let e=0;e<C.length;e++)new IMask(C[e],{mask:"+7(000)000-00-00"})}function V(e,a){e.classList.add("page-contact-container-form-block-item__label--show"),a.classList.add("page-contact-container-form-block-item__input--error"),a.parentNode.classList.add("page-contact-container-form-block-item--error"),setTimeout(()=>{e.classList.remove("page-contact-container-form-block-item__label--show"),a.classList.remove("page-contact-container-form-block-item__input--error"),a.parentNode.classList.remove("page-contact-container-form-block-item--error")},3e3)}function P(){t.classList.remove("popup-photo--show"),setTimeout(()=>{c.classList.remove("compensate-for-scrollbar"),document.body.style.overflow="initial"},150)}function $(e,a){var o=document.querySelector(`.js-map-label[data-id="${a.dataset.id}"]`),a=document.querySelector(`.js-map-icon[data-id="${a.dataset.id}"]`);"add"===e?(o.classList.contains("page-map-wrap-marker__label--active")||o.classList.add("page-map-wrap-marker__label--active"),a.classList.contains("page-map-wrap-marker__icon--active")||a.classList.add("page-map-wrap-marker__icon--active"),a.parentElement.classList.contains("page-map-wrap-marker--active")||a.parentElement.classList.add("page-map-wrap-marker--active")):(o.classList.contains("page-map-wrap-marker__label--active")&&o.classList.remove("page-map-wrap-marker__label--active"),a.classList.contains("page-map-wrap-marker__icon--active")&&a.classList.remove("page-map-wrap-marker__icon--active"),a.parentElement.classList.contains("page-map-wrap-marker--active")&&a.parentElement.classList.remove("page-map-wrap-marker--active"))}k.addEventListener("click",()=>h.scrollIntoView({block:"center",behavior:"smooth"})),n.addEventListener("submit",e=>{e.preventDefault()}),w.addEventListener("click",()=>{var e;i.value.length<2&&V(p,i),l.value.length<16&&V(d,l),m.value.match(S)||V(u,m),g.checked||(g.classList.add("page-contact-container-form-bottom__input--error"),setTimeout(()=>g.classList.remove("page-contact-container-form-bottom__input--error"),3e3)),i.value.length<2||l.value.length<16||!m.value.match(S)||!g.checked||(w.classList.add("disabled"),e={name:i.value,phone:l.value,email:m.value},axios({method:"get",url:window.urlApiSendForm,data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{setTimeout(()=>{w.classList.remove("disabled")},1e3),setTimeout(()=>{w.classList.add("page-contact-container-form-block-item__btn--send"),w.innerHTML="Отправлено",v.forEach(e=>e.value="")},2e3),setTimeout(()=>{w.classList.remove("page-contact-container-form-block-item__btn--send"),w.innerHTML="Отправить заявку"},4e3)}).catch(()=>alert("Oops! Something went wrong… try again later.")))}),a.forEach(e=>e.addEventListener("click",()=>{e.classList.contains("page-description-pagination-item-block--active")||(a.forEach(e=>e.classList.remove("page-description-pagination-item-block--active")),e.classList.add("page-description-pagination-item-block--active"),M.slideTo(e.dataset.id))})),o.forEach(a=>a.addEventListener("click",e=>{e.target.classList.contains("js-swiper-img")&&(s.src=a.dataset.src,t.classList.add("popup-photo--show"),c.classList.add("compensate-for-scrollbar"),document.body.style.overflow="hidden")})),r.addEventListener("click",()=>P()),document.addEventListener("click",e=>{e.target===t&&P()}),T=E<=700?[44.99163,38.926551]:E<=990?[44.98863,38.931999]:[44.99063,38.929699],DG.then(function(){q=DG.map("map",{center:T,zoom:16,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,zoomControl:!1,fullscreenControl:!1,keyboard:!1});for(let e=0;e<y.length;e++)a=y[e].classIcon,o=y[e].label,t=e+1,I=DG.divIcon({iconSize:[46,46],className:"page-map-wrap-marker",html:`
                <div class="page-map-wrap-marker__icon js-map-icon ${a}" data-id="${t}"></div>
                <div class="page-map-wrap-marker__label js-map-label" data-id="${t}">${o}</div>
            `}),DG.marker(y[e].coordinates,{icon:I}).addTo(q);var a,o,t,r,s;for(let e=0;e<j.length;e++)r=j[e].classContainer,s=j[e].classIcon,I=DG.divIcon({iconSize:[46,46],className:"page-map-wrap-marker "+r,html:`<div class="page-map-wrap-marker__icon ${s}"></div>`}),DG.marker(j[e].coordinates,{icon:I}).addTo(q);e.forEach(e=>e.addEventListener("mouseover",()=>$("add",e))),e.forEach(e=>e.addEventListener("mouseout",()=>$("remove",e)))})});